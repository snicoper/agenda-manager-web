<am-page-simple>
  @if (alertState.show) {
    <!-- recovery password message -->
    <section class="recovery-password-message">
      <mat-card class="mat-elevation-z10 p-4">
        <mat-card-content>
          <am-alert [type]="alertState.type" [show]="alertState.show" (eventClose)="handleResetForm()">
            {{ alertState.message }}
          </am-alert>
        </mat-card-content>

        <mat-card-footer class="mt-4 ms-2 d-flex justify-content-center">
          <button mat-flat-button class="ms-2" type="button" [routerLink]="[siteUrls.auth.login]">
            Iniciar sesión
          </button>

          @if (!alertState.isSuccess) {
            <button mat-flat-button class="ms-2" type="button" (click)="handleResetForm()">
              Enviar correo electrónico nuevamente
            </button>
          }
        </mat-card-footer>
      </mat-card>
    </section>
  } @else {
    <!-- recovery password form -->
    <section class="recovery-password-container">
      <form (ngSubmit)="handleSubmit()" [formGroup]="formState.form" class="form">
        <mat-card class="mat-elevation-z10 p-4">
          <mat-card-header>
            <mat-card-title class="title">
              <h2>Recuperar contraseña</h2>
            </mat-card-title>
          </mat-card-header>

          <mat-card-content>
            <am-non-field-errors [badRequest]="formState.badRequest" />

            <!-- email -->
            <am-form-input
              [formState]="formState"
              [formInputType]="formInputType.Email"
              fieldName="email"
              formControlName="email"
              label="Correo electrónico"
              icon="mail"
            />

            <mat-divider />
          </mat-card-content>

          <mat-card-footer class="mt-4 ms-2">
            <am-btn-loading [loading]="formState.isLoading" btnText="Recuperar contraseña" />
            <button mat-flat-button class="ms-2" type="button" [routerLink]="[siteUrls.auth.login]">
              Iniciar sesión
            </button>
          </mat-card-footer>
        </mat-card>
      </form>
    </section>
  }
</am-page-simple>
